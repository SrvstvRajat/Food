{"ast":null,"code":"var _jsxFileName = \"/Users/rajat/Desktop/Swato/Frontend/src/Components/Context/AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/React.createContext(); //custom hook that allows components to access context data\n\nexport function useAuth() {\n  _s();\n\n  return useContext(AuthContext);\n}\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction AuthProvider(_ref) {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const history = useHistory();\n  const [user, userSet] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  async function signUp(name, email, password, confirmPassword) {\n    await axios.post(\"/user/signup\", {\n      name: name,\n      email: email,\n      password: password,\n      confirmPassword: confirmPassword\n    });\n    console.log(\"rftgyhujikolpoygtfftgyhuj\");\n    console.log(name);\n    userSet(user);\n  }\n\n  async function login(email, password) {\n    try {\n      const data = await axios.post(\"/user/login\", {\n        email: email,\n        password: password\n      });\n      console.log(data);\n      userSet(data);\n      localStorage.setItem(\"user\", JSON.stringify(data.data));\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async function logout() {\n    localStorage.removeItem(\"user\");\n    const data = await axios.get(\"/user/logout\");\n    history.push(\"/\");\n    console.log(data);\n    userSet(null);\n  }\n\n  useEffect(async () => {\n    let data = localStorage.getItem(\"user\");\n    console.log(data, 898787);\n\n    if (data) {\n      userSet(JSON.parse(data));\n      console.log(user);\n      history.push(\"/\");\n    } else {\n      userSet(null);\n    }\n  }, []);\n  const value = {\n    user,\n    login,\n    signUp,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(AuthProvider, \"T9ItoMyT9N/EPFHOEPBRqDpGcXg=\", false, function () {\n  return [useHistory];\n});\n\n_c = AuthProvider;\nexport default AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","useHistory","AuthContext","createContext","useAuth","AuthProvider","children","history","user","userSet","loading","setLoading","signUp","name","email","password","confirmPassword","post","console","log","login","data","localStorage","setItem","JSON","stringify","err","logout","removeItem","get","push","getItem","parse","value"],"sources":["/Users/rajat/Desktop/Swato/Frontend/src/Components/Context/AuthProvider.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router';\n\nexport const AuthContext = React.createContext();\n//custom hook that allows components to access context data\nexport function useAuth() {\n    return useContext(AuthContext)\n}\nfunction AuthProvider({ children }) {\n    const history = useHistory();\n    const [user, userSet] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n\n    async function signUp(name,email,password,confirmPassword) \n    {\n        await axios.post(\"/user/signup\",{\n            name:name,\n            email: email,\n            password: password,\n            confirmPassword:confirmPassword\n        });\n        console.log(\"rftgyhujikolpoygtfftgyhuj\")\n        console.log(name);\n        userSet(user);\n    }\n    async function login(email, password) {\n        try {\n            const data = await axios.post(\"/user/login\", {\n                email: email,\n                password: password\n            });\n            console.log(data);\n            userSet(data);\n            localStorage.setItem(\"user\", JSON.stringify(data.data));\n            return data;\n        }\n        catch (err) {\n            console.log(err);\n        }\n    }\n    async function logout() \n    {\n        localStorage.removeItem(\"user\")\n        const data = await axios.get(\"/user/logout\");\n        history.push(\"/\");\n        console.log(data);\n        userSet(null);\n    }\n\n    useEffect(async () => {\n        let data = localStorage.getItem(\"user\");\n        console.log(data,898787);\n        if (data) {\n            userSet(JSON.parse(data));\n            console.log(user);\n            history.push(\"/\");\n        } else {\n            userSet(null);\n        }\n    }, [])\n\n    const value = {\n        user,\n        login,\n        signUp,\n        logout\n    }\n\n    return (\n        < AuthContext.Provider value={value} >\n            {!loading && children}\n        </AuthContext.Provider >\n    )\n}\n\nexport default AuthProvider\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}