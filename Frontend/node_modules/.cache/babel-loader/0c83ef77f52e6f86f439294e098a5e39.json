{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Rajat/Desktop/My Projects/Swato/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Rajat/Desktop/My Projects/Swato/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Rajat/Desktop/My Projects/Swato/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useEffect,useState}from'react';import{useParams}from'react-router';import'../Styles/planDetail.css';import'../Styles/contact.css';import AuthProvider,{useAuth}from'../Context/AuthProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlanDetail(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),plan=_useState2[0],setplan=_useState2[1];var _useParams=useParams(),id=_useParams.id;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),arr=_useState4[0],setarr=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),review=_useState6[0],setreview=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),rate=_useState8[0],setrate=_useState8[1];var _useAuth=useAuth(),user=_useAuth.user;console.log(id);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,reviews;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"inside useeffect\");_context.next=3;return axios.get(\"/plans/plan/\"+id);case 3:data=_context.sent;console.log(data,565785765);delete data.data.data[\"_id\"];delete data.data.data[\"__v\"];setplan(data.data.data);_context.next=10;return axios.get(\"/review/\"+id);case 10:reviews=_context.sent;// console.log(reviews);\nconsole.log(reviews.data.data);setarr(reviews.data.data);// console.log(arr);\ncase 13:case\"end\":return _context.stop();}}},_callee);})),[]);function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}console.log(rate);console.log(\"user \",user);var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,reviews;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(123645);_context2.next=3;return axios.post(\"/review/crud/\"+id,{\"review\":review,\"rating\":5,\"user\":user.userDetails._id,\"plan\":id});case 3:data=_context2.sent;console.log(data);_context2.next=7;return axios.get(\"/review/\"+id);case 7:reviews=_context2.sent;// console.log(reviews);\nsetarr(reviews.data.data);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClick(){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(reviewId){var data,reviews;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/review/crud/\"+id,{data:{\"id\":reviewId}});case 3:data=_context3.sent;console.log(data.config.data);_context3.next=7;return axios.get(\"/review/\"+id);case 7:reviews=_context3.sent;console.log(reviews);setarr(reviews.data.data);alert(\"review deleted\");_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0);case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function handleDelete(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"pDetailBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h1Box\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h1\",children:\"PLAN DETAILS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"planDetailBox\",children:/*#__PURE__*/_jsx(\"div\",{className:\"planDetail\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loginBox\",children:Object.keys(plan).map(function(ele,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"entryBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"entryText\",children:capitalizeFirstLetter(ele)}),/*#__PURE__*/_jsx(\"div\",{className:\" input\",children:capitalizeFirstLetter(plan[ele].toString())})]},key);})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewEnrty\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:review,onChange:function onChange(e){return setreview(e.target.value);}}),/*#__PURE__*/_jsxs(\"select\",{name:\"\",id:\"\",className:\"select\",onChange:function onChange(e){setrate(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5 Excellent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4 Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 Very Poor\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleClick,children:\"Submit\"})]}),arr&&(arr===null||arr===void 0?void 0:arr.map(function(ele,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsCard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pdreviews\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pdrdetail\",children:[/*#__PURE__*/_jsx(\"h3\",{children:ele.user.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[\" \",ele.review]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rate\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"star5\",title:\"text\",children:ele.rating})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rcBtn\",children:/*#__PURE__*/_jsx(\"button\",{className:\"showMoreBtn btn\",onClick:function onClick(){handleDelete(ele._id);},children:\"Delete\"})})]},key);}))]})]});}export default PlanDetail;","map":{"version":3,"names":["axios","React","useEffect","useState","useParams","AuthProvider","useAuth","PlanDetail","plan","setplan","id","arr","setarr","review","setreview","rate","setrate","user","console","log","get","data","reviews","capitalizeFirstLetter","string","charAt","toUpperCase","slice","handleClick","post","userDetails","_id","handleDelete","reviewId","delete","config","alert","Object","keys","map","ele","key","toString","e","target","value","name","rating"],"sources":["C:/Users/Rajat/Desktop/My Projects/Swato/Frontend/src/Components/PlanDetail Page/PlanDetail.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport '../Styles/planDetail.css'\r\nimport '../Styles/contact.css'\r\nimport AuthProvider, { useAuth } from '../Context/AuthProvider';\r\n\r\nfunction PlanDetail() {\r\n    const [plan, setplan] = useState({})\r\n    const { id } = useParams();\r\n    const [arr, setarr] = useState();\r\n    const [review, setreview] = useState(\"\");\r\n    const [rate, setrate] = useState();\r\n    const { user } = useAuth();\r\n    console.log(id);\r\n    useEffect(async () => {\r\n        console.log(\"inside useeffect\");\r\n        const data = await axios.get(\"/plans/plan/\"+id)\r\n        console.log(data,565785765);\r\n        delete data.data.data[\"_id\"]\r\n        delete data.data.data[\"__v\"]\r\n        setplan(data.data.data)\r\n        const reviews = await axios.get(\"/review/\"+id);\r\n        // console.log(reviews);\r\n        console.log(reviews.data.data);\r\n        setarr(reviews.data.data)\r\n        // console.log(arr);\r\n    }, [])\r\n\r\n    function capitalizeFirstLetter(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n    console.log(rate);\r\n    console.log(\"user \",user);\r\n    const handleClick = async () => {\r\n        console.log(123645);\r\n        const data = await axios.post(\"/review/crud/\"+id, {\r\n            \"review\": review,\r\n            \"rating\": 5,\r\n            \"user\": user.userDetails._id,\r\n            \"plan\": id\r\n        })\r\n        console.log(data);\r\n        const reviews = await axios.get(\"/review/\" + id);\r\n        // console.log(reviews);\r\n        setarr(reviews.data.data);\r\n    }\r\n    const handleDelete = async(reviewId) =>{\r\n        try{\r\n           \r\n            // console.log(\"12345\",reviewId);\r\n            let data = await axios.delete(\"/review/crud/\"+id, { data: { \"id\": reviewId } });\r\n            console.log(data.config.data);\r\n            const reviews = await axios.get(\"/review/\" + id);\r\n            console.log(reviews);\r\n            setarr(reviews.data.data);\r\n            alert(\"review deleted\");\r\n        }\r\n        catch(err){\r\n            alert(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"pDetailBox\">\r\n            <div className='h1Box'>\r\n                <h1 className='h1'>PLAN DETAILS</h1>\r\n                <div className=\"line\"></div>\r\n            </div>\r\n            <div className=\"planDetailBox\">\r\n                <div className='planDetail'>\r\n                    <div className=\"loginBox\">\r\n                        {\r\n                            Object.keys(plan).map((ele, key) => (\r\n                                <div className='entryBox' key={key}>\r\n                                    <div className=\"entryText\">{capitalizeFirstLetter(ele)}</div>\r\n                                    <div className=\" input\">{capitalizeFirstLetter(plan[ele].toString())}</div>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div className='reviewBox'>\r\n                <div className=\"reviewEnrty\">\r\n                    <input type=\"text\" value={review} onChange={(e) => setreview(e.target.value)} />\r\n                    <select name=\"\" id=\"\" className=\"select\" onChange={(e) => { setrate(e.target.value) }}>\r\n                        <option value=\"5\">5 Excellent</option>\r\n                        <option value=\"4\">4 Very Good</option>\r\n                        <option value=\"3\">3 Good</option>\r\n                        <option value=\"2\">2 Poor</option>\r\n                        <option value=\"1\">1 Very Poor</option>\r\n                    </select>\r\n                    <button className=\"btn\" onClick={handleClick}>\r\n                        Submit\r\n                    </button>\r\n                </div>\r\n                {\r\n                    arr && arr?.map((ele, key) => (\r\n                        <div className=\"reviewsCard\" key={key}>\r\n                            <div className=\"pdreviews\">\r\n                                <div className=\"pdrdetail\">\r\n                                    <h3>{ele.user.name}</h3>\r\n                                    <div className=\"input\"> {ele.review}</div>\r\n                                </div>\r\n                                <div className='rate'>\r\n                                    {\r\n                                        <label htmlFor=\"star5\" title=\"text\">{ele.rating}</label>\r\n\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className='rcBtn'>\r\n                                <button className=\"showMoreBtn btn\" onClick={()=>{handleDelete(ele._id)}}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PlanDetail\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}