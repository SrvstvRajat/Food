{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajat\\\\Desktop\\\\Food\\\\foodApp_frontend\\\\src\\\\Components\\\\Context\\\\AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/React.createContext(); //custom hook that allows components to access context data\n\nexport function useAuth() {\n  _s();\n\n  return useContext(AuthContext);\n}\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction AuthProvider({\n  children\n}) {\n  _s2();\n\n  const history = useHistory();\n  const [user, userSet] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  async function signUp(name, email, password, confirmPassword) {\n    const data = await axios.post(\"/user/signup\", {\n      name: name,\n      email: email,\n      password: password,\n      confirmPassword: confirmPassword\n    });\n    console.log(data, user);\n    userSet(user);\n  }\n\n  async function login(email, password) {\n    try {\n      const data = await axios.post(\"/user/login\", {\n        email: email,\n        password: password\n      });\n      console.log(\"dataaa\", data.data);\n      userSet(data.data);\n      localStorage.setItem(\"user\", JSON.stringify(data.data));\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async function logout() {\n    localStorage.removeItem(\"user\");\n    const data = await axios.get(\"/user/logout\");\n    console.log(data);\n    userSet(null);\n  }\n\n  useEffect(async () => {\n    let data = localStorage.getItem(\"user\");\n    console.log(data, 898787);\n\n    if (data) {\n      userSet(JSON.parse(data));\n      console.log(user);\n      history.push(\"/\");\n    } else {\n      userSet(null);\n    }\n  }, []);\n  const value = {\n    user,\n    login,\n    signUp,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(AuthProvider, \"T9ItoMyT9N/EPFHOEPBRqDpGcXg=\", false, function () {\n  return [useHistory];\n});\n\n_c = AuthProvider;\nexport default AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/Rajat/Desktop/Food/foodApp_frontend/src/Components/Context/AuthProvider.js"],"names":["React","useState","useEffect","useContext","axios","useHistory","AuthContext","createContext","useAuth","AuthProvider","children","history","user","userSet","loading","setLoading","signUp","name","email","password","confirmPassword","data","post","console","log","login","localStorage","setItem","JSON","stringify","err","logout","removeItem","get","getItem","parse","push","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport const AuthContext = React.createContext();\r\n//custom hook that allows components to access context data\r\nexport function useAuth() {\r\n    return useContext(AuthContext)\r\n}\r\nfunction AuthProvider({ children }) {\r\n    const history = useHistory();\r\n    const [user, userSet] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    async function signUp(name,email,password,confirmPassword) {\r\n        const data = await axios.post(\"/user/signup\", {\r\n            name:name,\r\n            email: email,\r\n            password: password,\r\n            confirmPassword:confirmPassword\r\n        });\r\n        console.log(data,user);\r\n        userSet(user);\r\n    }\r\n    async function login(email, password) {\r\n        try {\r\n            const data = await axios.post(\"/user/login\", {\r\n                email: email,\r\n                password: password\r\n            });\r\n            console.log(\"dataaa\",data.data);\r\n            userSet(data.data);\r\n            localStorage.setItem(\"user\", JSON.stringify(data.data));\r\n            return data;\r\n        }\r\n        catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n    async function logout() {\r\n        localStorage.removeItem(\"user\")\r\n        const data = await axios.get(\"/user/logout\");\r\n        console.log(data);\r\n        userSet(null);\r\n    }\r\n\r\n    useEffect(async () => {\r\n        let data = localStorage.getItem(\"user\");\r\n        console.log(data,898787);\r\n        if (data) {\r\n            userSet(JSON.parse(data));\r\n            console.log(user);\r\n            history.push(\"/\");\r\n        } else {\r\n            userSet(null);\r\n        }\r\n    }, [])\r\n\r\n    const value = {\r\n        user,\r\n        login,\r\n        signUp,\r\n        logout\r\n    }\r\n\r\n    return (\r\n        < AuthContext.Provider value={value} >\r\n            {!loading && children}\r\n        </AuthContext.Provider >\r\n    )\r\n}\r\n\r\nexport default AuthProvider\r\n"]},"metadata":{},"sourceType":"module"}